// Mixin
@mixin large-line
    align-items: center
    display: flex
    &::after
        background-color: $color-text
        content: ''
        flex: 1
        height: 1px
        margin-left: $spacing1

// Base
html.has-menu-opened body::after
    opacity: .5
.heading
    @include in-page-without-sidebar
        h2
            max-width: col(8)
            width: unset
.avatar
    border-radius: 0

// Header
header#document-header
    .menu
        .nav-level-1 > li
            &.header-i18n [role="button"]
                @include icon(caret-bottom, after)
                    margin-left: half($spacing0)
    @include media-breakpoint-down(desktop)
        .menu
            .dropdown-menu .container
                padding: 0
            .menu-title
                @include h4
    @include media-breakpoint-up(desktop)
        &:not(.is-sticky)
            &::after
                background: $color-border
                bottom: half($spacing0)
                content: ''
                height: 1px
                left: $grid-gutter
                position: absolute
                width: calc(100% - (#{$grid-gutter} * 2))
        nav .container
            align-items: flex-end
        .menu
            .nav-level-1 
                align-items: flex-end
                li:not(.header-i18n)
                    a,
                    span
                        position: relative
                        width: fit-content
                        &.active::after
                            @include icon-site(asterisk)
                            font-size: px2rem(24)
                            position: absolute
                            top: half(-$spacing0)
                            right: -$spacing0
                            width: 10px
                            display: block
                > li
                    > a,
                    > span
                        line-height: 100%
                        padding-bottom: 0
                    &:not(.header-i18n)
                        > span,
                        > a
                            &[aria-expanded][aria-expanded="true"]::after
                                transform: none
                            &::after
                                display: none
                            &.active::after
                                right: 0
                .dropdown-menu
                    padding-top: calc(#{$spacing3} + #{$spacing1})
                .has-children:not(.header-i18n)
                    > a[aria-expanded="true"],
                    > span[aria-expanded="true"] 
                        + .dropdown-menu .container
                            align-items: flex-start
                            gap: $grid-gutter
                            display: flex
                            .menu-title
                                @include h2
                                margin-top: -7px
                                width: col(3)
                            .nav-level-2
                                display: block
                                width: col(9)
                                padding: 0
                                li 
                                    + li
                                        margin-top: $spacing0
                                    a, span
                                        line-height: inherit
                                    span
                                        padding: 0
// Hero
.hero .content 
    @include media-breakpoint-down(md)
        padding-top: 0
    hgroup
        .artist,
        .dates
            @include h1
        h1 + p
            margin-top: 0
        .dates
            @include body-text
            margin-top: $spacing0
    figure figcaption
        .credit-content
            background: none

.block-chapter
    &--alt_background
        &, .chapter
            background: none !important
        .text
            padding: 0 !important
        .rich-text p
            font-size: px2rem(32)
            line-height: 130%
            @include media-breakpoint-down(desktop)
                font-size: px2rem(22)

.breadcrumb-nav *
    font-size: px2rem(14)

// Home
.page__home
    .hero 
        h1
            @include h2
        .content
            position: relative
            .home-schedule
                @include meta
                @include media-breakpoint-down(desktop)
                    margin-top: $spacing2
                @include media-breakpoint-up(desktop)
                    bottom: 0
                    position: absolute
                    text-align: right
                    right: 0
                    &::before
                        @include icon-site(asterisk)
                        font-size: px2rem(24)
                        position: absolute
                        transform: translate(-100%, 10%)
    .block
        margin-top: $spacing4
        margin-bottom: $spacing4

// Footer
footer#document-footer
    .footer-logo
        @include grid(2)
        align-items: flex-start
        a::after
            display: none
    .footer-site
        > .container
            padding: 0
            margin: 0
            margin-top: half($spacing0)
            justify-content: flex-end
            .dropdown-languages
                text-align: left
        .footer-legals
            + .container
                margin-top: $spacing0
    .footer-search 
        > div
            border-top: 1px solid $color-border
            width: 100%
            padding-top: $spacing1
            .pagefind-ui__toggle
                @include h2
                font-family: $body-font-family
                &::after
                    display: none
                &::before
                    @include icon-site(search)
                    font-size: inherit
                @include media-breakpoint-up(desktop)
                    align-items: flex-end
                    display: flex
                    gap: $spacing0
            .pagefind-ui__result-excerpt mark
                color: $color-text
            .pagefind-ui__form::after
                @include icon-site(search)
    .footer-i18n
        button:focus-visible
            outline-offset: 0px
            border: 4px solid $color-accent

// TOC
.toc-container
    nav 
        a::after
            @include icon-site(outline)
            display: inline-block
            font-size: px2rem(16)
            margin-left: half($spacing0)
            transform: scale(0)
            transform-origin: bottom left
        a.active::after
            transform: scale(1)
            transition: transform .3s ease
// Blocks
.document-content
    .heading
        @include media-breakpoint-up(desktop)
            @include large-line
            gap: $spacing1
    h2
        @include h4
    @include media-breakpoint-down(desktop)
        .block-summary
            margin-top: 0
.block-siblings-navigation
    .siblings-navigation ul 
        a:hover
            filter: brightness(0.5)
        @include media-breakpoint-up(desktop)
            .next span::after
                @include icon-site(arrow-right)
            .previous span::before
                @include icon-site(arrow-left)
        @include media-breakpoint-down(desktop)
            .next::after
                @include icon-site(arrow-right)
            .previous::before
                @include icon-site(arrow-left)
.block-pages--grid .grid
    article
        h3 a::after
            display: none
        .media img
            aspect-ratio: 1
.block-agenda
    .event 
        &-subtitle
            font-style: italic
        &-time
            span + span::before
                @include icon-site(arrow-right)
    .block-title
        @include large-line
        font-weight: bold
        text-transform: none
        gap: $spacing2
    &--large
        .event
            .more::after
                @include icon-site(arrow-top)
                font-size: px2rem(18)
        @include media-breakpoint-down(desktop)
            .event-categories
                background-color: $color-accent
                left: -$spacing1
                margin: 0
                padding: half($spacing0) $spacing1
                position: absolute
                top: -$spacing0
                transform: translateY(-100%)
                width: calc(100% + (#{$spacing1} * 2))
        @include media-breakpoint-up(xl)
            .event-content
                h2, 
                .event-subtitle,
                .event-dates span
                    @include h1
            .event-description
                display: flex
                justify-content: space-between
                gap: $grid-gutter
                p:not(.more)
                    width: col(4, 6)
                .more
                    margin: 0
        @include media-breakpoint-up(desktop)
            .event
                position: relative
                &-content
                    display: flex
                    flex-direction: column
                    justify-content: flex-end
                    position: static
                    hgroup
                        flex: 1
                    h2
                        margin-bottom: auto
                    .event-dates
                        text-align: right
                &-categories 
                    background-color: $color-accent
                    display: flex
                    height: 100%
                    left: 50%
                    margin: 0
                    padding: $spacing0 half($spacing0)
                    position: absolute
                    top: 0
                    transform: translateX(-189%)
                    span 
                        writing-mode: tb
                        transform: rotate(180deg)
                &-status
                    @include h4
                    @include large-line
                    font-weight: 600
                    margin-bottom: $spacing0
                .media img
                    height: 100%
    &--list
        @include media-breakpoint-up(desktop)
            .event
                padding-bottom: $spacing2
                margin-bottom: $spacing2
        .event
            &:last-child
                border-bottom: 0
            &--with-image
                .media img
                    aspect-ratio: 1
    &--grid
        @include media-breakpoint-up(desktop)
            .event-dates
                @include h3
                text-align: right
body:not(.full-width),
main > .blocks,
body.full-width
    .block-image
        @include media-breakpoint-up(desktop)
            .block-content figure
                background-color: $color-accent
                text-align: right
                picture
                    display: inline-block
                    filter: grayscale(1)
                    margin: $spacing1 $spacing1 0
                    mix-blend-mode: multiply
                    width: 60%
                    &:hover
                        filter: grayscale(0)
                figcaption
                    display: inline-block
                    margin: $spacing1
                    width: -webkit-fill-available
                    .credit p
                        font-family: $h1-font-family
            &:nth-child(even)
                .block-content figure
                    picture,
                    figcaption
                        margin-right: 40%
                    figcaption
                        width: 60%
    .block-persons
        .persons
            &, &.is-column
                display: block
        .person
            + .person
                margin-top: $spacing1
            .avatar 
                margin-bottom: 0
            .description
                margin: 0
                &, h3
                    @include h3
                    + p
                        font-style: italic
            @include media-breakpoint-up(desktop)
                + .person
                    margin-top: $spacing3
                .description
                    width: col(6, 8)
                    border-bottom: 1px solid $color-border
                    &, h3
                        @include h2
            @include media-breakpoint-up(xl)
                .avatar
                    margin-right: $grid-gutter
                    width: col(3, 8)
                .description
                    width: col(5, 8)
    .block-agenda--large
        @include media-breakpoint-up(desktop)
            .event
                align-items: unset
.block-agenda--list
    @include in-page-with-sidebar
        .event-content
            grid-column: 4 / 9
            width: unset
        .event-dates
            position: absolute
            top: 0
            left: 0
            > span
                @include h3
            .event-time
                @include meta
                display: block
                &::before
                    display: none
.block-chapter--with-image
    @include in-page-with-sidebar
        .chapter 
            flex-direction: row-reverse
            .text
                flex: 1
                margin-right: $grid-gutter
            figure
                width: col(4, 8)
                img
                    width: 100%
// Events
.events__page
    .event-sidebar .toc-container
        border-top: none
        padding-top: 0
    .hero
        .container .content
            align-items: unset
        &--with-image
            @include media-breakpoint-down(desktop)
                figure
                    margin-top: $spacing1
        &-informations 
            @include h1
            position: relative
            hgroup
                h1 + p
                    font-style: italic
            .event-dates
                text-align: right
            .event-categories
                position: absolute
                @include media-breakpoint-down(desktop)
                    top: 0
                    margin: 0
                    transform: translateY(-120%)
        @include media-breakpoint-up(desktop)
            &-informations 
                display: flex
                flex-direction: column
                justify-content: space-between
                position: relative
                width: col(6)
            .event-categories
                bottom: 0
                span
                    writing-mode: tb
                    transform: rotate(180deg)
            figure
                width: col(6)
    .block-pages--grid
        .grid
            @include grid(1)
        article
            background: $color-accent
            padding: $spacing1
            width: 100%
            a::after
                display: none
            h3, p
                @include h2
            p
                font-style: italic
            .media 
                filter: grayscale(1)
                mix-blend-mode: multiply
                @include media-breakpoint-up(md)
                    margin: 0
                    width: col(2.94, 8)
            &:hover .media
                filter: grayscale(0)
            @include media-breakpoint-up(md)
                flex-direction: row
                gap: $grid-gutter
    .lead 
        font-family: $lead-font-family
.pages__section
    .hero
        .page-summary
            @include h1
            font-style: italic
    @include media-breakpoint-up(desktop)
        &.full-width
            .block-pages--grid .grid
                @include grid(4)
                h3
                    @include h4
                    a::after
                        display: none
    @include media-breakpoint-up(xl)
        &.full-width
            .block-summary
                width: col(8)

// glightbox
#glightbox-body
    .goverlay
        background-color: $color-accent
    .gslide-desc
        color: $color-text